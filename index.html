<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plano de Treino â€“ InÃ­cio</title>
  <link rel="stylesheet" href="assets/style.css">
  <script src="https://kit.fontawesome.com/a2d9b3c9c1.js" crossorigin="anonymous"></script>
</head>
<body>

<header class="topbar">
  <div class="container">
    <h1>Plano de Treino â€“ Bicicleta ErgomÃ©trica</h1>
    <nav>
      <a href="index.html" class="active">InÃ­cio</a>
      <a href="treino.html">Treinos</a>
    </nav>
  </div>
</header>

<main class="container main-grid">

  <!-- Card de boas-vindas e progresso -->
  <section class="card welcome">
    <h2>Bem-vindo ðŸ‘‹</h2>
    <p class="muted">
      Este plano completo de 3 meses jÃ¡ estÃ¡ carregado â€” vocÃª pode acompanhar offline ou exportar para GitHub Pages.
    </p>

    <div class="start-row">
      <button id="btn-start" class="btn-primary">ComeÃ§ar meu treino</button>
      <div class="progress-visual">
        <div id="progress-bar" class="progress-bar"><span id="progress-fill"></span></div>
        <div id="progress-label" class="muted small">0 de 84 dias concluÃ­dos</div>
      </div>
    </div>

    <div class="tips">
      <h3>Dicas rÃ¡pidas</h3>
      <ul id="tip-list">
        <!-- inseridas via JS -->
      </ul>
    </div>
  </section>

  <!-- Card do dia atual -->
  <aside class="card stats">
    <h3>Seu dia atual</h3>
    <div id="today-card" class="today-card">
      <!-- inserido via JS -->
    </div>

    <h3>Progresso</h3>
    <p id="summary" class="muted">Carregando...</p>

    <div class="small-note muted">InÃ­cio do plano: <strong>19/10/2025</strong></div>
  </aside>

  <!-- Card de atalhos -->
  <section class="card more">
    <h3>Atalhos</h3>
    <div class="links">
      <a class="btn-outline" href="treino.html#month1">MÃªs 1</a>
      <a class="btn-outline" href="treino.html#month2">MÃªs 2</a>
      <a class="btn-outline" href="treino.html#month3">MÃªs 3</a>
    </div>

    <h3 style="margin-top:1rem">Sobre o plano</h3>
    <p class="muted">
      O objetivo Ã© criar hÃ¡bito sem exaustÃ£o. Siga hidrataÃ§Ã£o e alimentaÃ§Ã£o recomendadas e ajuste a resistÃªncia conforme sentir.
    </p>
  </section>

</main>

<footer class="footer">
  <div class="container">Feito com â™¥</div>
</footer>

<script src="assets/script3meses.js"></script>
<script>
  const TOTAL_DAYS = 84;

  // ---------- DICAS ----------
  const TIPS = [
    'Hidrate-se: meta ~3L/dia. Leve sua garrafa.',
    'Evite bebidas aÃ§ucaradas antes e depois do treino.',
    'Inclua proteÃ­na e fibras nas refeiÃ§Ãµes principais.',
    'Ajuste o assento: perna quase esticada com leve flexÃ£o no joelho.',
    'Se conseguir conversar durante o esforÃ§o, a intensidade estÃ¡ adequada.'
  ];
  const ul = document.getElementById('tip-list');
  TIPS.forEach(t => {
    const li = document.createElement('li');
    li.textContent = t;
    ul.appendChild(li);
  });

  // ---------- PROGRESSO ----------
  function loadProgress(){
    try{ return JSON.parse(localStorage.getItem('plano_3meses_progress_v1')) || {}; }
    catch(e){ return {}; }
  }

  function updateProgressUI(){
    const progress = loadProgress();
    const doneCount = Object.values(progress).filter(Boolean).length;
    const percent = Math.round((doneCount / TOTAL_DAYS) * 100);

    const fill = document.getElementById('progress-fill');
    if(fill) fill.style.width = percent + '%';

    const label = document.getElementById('progress-label');
    if(label) label.textContent = `${doneCount} de ${TOTAL_DAYS} dias concluÃ­dos`;

    const summary = document.getElementById('summary');
    if(summary) summary.textContent = `${doneCount} de ${TOTAL_DAYS} dias completos`;
  }

  // ---------- DIA ATUAL ----------
  function renderTodayCard(){
    const startDate = new Date(2025, 9, 19);
    const t = new Date();
    let dayIndex = Math.floor((t - startDate)/(1000*60*60*24)) + 1;
    if(dayIndex < 1) dayIndex = 1;
    if(dayIndex > TOTAL_DAYS) dayIndex = TOTAL_DAYS;

    const todayCard = document.getElementById('today-card');
    if(!todayCard) return;
    todayCard.innerHTML = `
      <strong>Dia ${dayIndex}</strong>
      <div class="muted small">10-30 min â€¢ Intensidade: 1-4</div>
      <div style="margin-top:.6rem">
        <a href="treino.html#month${Math.ceil(dayIndex/28)}" class="btn-primary">Abrir Treino</a>
      </div>
    `;
  }

  // ---------- BOTÃƒO INICIAR ----------
  document.getElementById('btn-start').addEventListener('click', () => {
    const startDate = new Date(2025, 9, 19);
    const t = new Date();
    let todayIndex = Math.floor((t - startDate)/(1000*60*60*24)) + 1;
    if(todayIndex < 1) todayIndex = 1;
    if(todayIndex > TOTAL_DAYS) todayIndex = TOTAL_DAYS;
    location.href = `treino.html#month${Math.ceil(todayIndex/28)}`;
  });

  // ---------- ATUALIZAÃ‡ÃƒO PERIÃ“DICA ----------
  function init(){
    renderTodayCard();
    updateProgressUI();
    setInterval(updateProgressUI,1000); // atualiza a cada segundo
  }

  document.addEventListener('DOMContentLoaded', init);

</script>

</body>
</html>
